<div class="change-password-container">
  <div class="form-card">
    <h2>Changer le mot de passe</h2>
    
    <form [formGroup]="passwordForm" (ngSubmit)="onSubmit()" class="password-form">
      <div class="form-group">
        <label for="currentPassword">Mot de passe actuel</label>
        <input
          type="password"
          id="currentPassword"
          formControlName="currentPassword"
          [class.error]="passwordForm.get('currentPassword')?.invalid && passwordForm.get('currentPassword')?.touched"
        />
        <div class="error-message" *ngIf="passwordForm.get('currentPassword')?.invalid && passwordForm.get('currentPassword')?.touched">
          <span *ngIf="passwordForm.get('currentPassword')?.errors?.['required']">Le mot de passe actuel est obligatoire</span>
          <span *ngIf="passwordForm.get('currentPassword')?.errors?.['incorrectPassword']">Le mot de passe actuel est incorrect</span>
        </div>
      </div>

      <div class="form-group">
        <label for="newPassword">Nouveau mot de passe</label>
        <input
          type="password"
          id="newPassword"
          formControlName="newPassword"
          [class.error]="passwordForm.get('newPassword')?.invalid && passwordForm.get('newPassword')?.touched"
        />
        <div class="error-message" *ngIf="passwordForm.get('newPassword')?.invalid && passwordForm.get('newPassword')?.touched">
          <span *ngIf="passwordForm.get('newPassword')?.errors?.['required']">Le nouveau mot de passe est obligatoire</span>
          <span *ngIf="passwordForm.get('newPassword')?.errors?.['minlength']">Le mot de passe doit contenir au moins 8 caract√®res</span>
        </div>
      </div>

      <div class="form-group">
        <label for="confirmPassword">Confirmer le nouveau mot de passe</label>
        <input
          type="password"
          id="confirmPassword"
          formControlName="confirmPassword"
          [class.error]="passwordForm.get('confirmPassword')?.invalid && passwordForm.get('confirmPassword')?.touched"
        />
        <div class="error-message" *ngIf="passwordForm.get('confirmPassword')?.invalid && passwordForm.get('confirmPassword')?.touched">
          <span *ngIf="passwordForm.get('confirmPassword')?.errors?.['required']">Veuillez confirmer votre mot de passe</span>
          <span *ngIf="passwordForm.get('confirmPassword')?.errors?.['passwordMismatch']">Les mots de passe ne correspondent pas</span>
        </div>
      </div>

      <div class="error-message" *ngIf="error">
        {{ error }}
      </div>

      <div class="success-message" *ngIf="success">
        {{ success }}
      </div>

      <button 
        type="submit" 
        class="submit-button" 
        [disabled]="passwordForm.invalid || isLoading"
      >
        <span *ngIf="!isLoading">Changer le mot de passe</span>
        <span *ngIf="isLoading" class="loading-spinner">
          <i class="fas fa-spinner fa-spin"></i> Changement du mot de passe...
        </span>
      </button>
    </form>
  </div>
</div>